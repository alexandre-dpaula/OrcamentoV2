<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Seu Orçamento | Produtora Audiovisual</title>
    <meta name="description" content="Monte seu orçamento personalizado para produção audiovisual e marketing digital.">
    <meta name="theme-color" content="#000000">
    <meta property="og:title" content="Seu Orçamento | Produtora Audiovisual">
    <meta property="og:description" content="Serviços de vídeo, fotografia e marketing digital.">
    <meta property="og:image" content="https://i.pinimg.com/1200x/80/f7/21/80f72141da9348cb7254a66c116fb7a4.jpg">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23ff6b35'/%3E%3C/svg%3E">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --bg:#000;--bg2:#0a0a0a;--bg3:#111;--bg4:#1a1a1a;--bg5:#252525;
            --txt:#fff;--txt2:#8e8e93;--txt3:#48484a;
            --brd:#1c1c1e;--brd2:#2c2c2e;
            --orange:#ff6b35;--red:#ff453a;--yellow:#ffd60a;--green:#30d158;--cyan:#64d2ff;--blue:#0a84ff;--purple:#bf5af2;
            --r-sm:10px;--r-md:14px;--r-lg:20px;--r-xl:28px;--r-full:100px;
        }
        html{font-size:16px;-webkit-font-smoothing:antialiased}
        body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--txt);min-height:100vh;line-height:1.4;padding-bottom:130px}
        ::-webkit-scrollbar{width:6px}::-webkit-scrollbar-thumb{background:var(--brd2);border-radius:3px}
        .icon{width:20px;height:20px;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;fill:none;flex-shrink:0}
        .icon-sm{width:16px;height:16px}.icon-lg{width:24px;height:24px}

        .header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;position:sticky;top:0;z-index:100;background:rgba(0,0,0,.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--brd)}
        .header__title{font-size:17px;font-weight:600}
        .header__btn{width:40px;height:40px;background:var(--bg4);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--txt2);cursor:pointer;transition:.2s}
        .header__btn:hover{background:var(--bg5);color:var(--txt)}

        .container{max-width:960px;margin:0 auto;padding:0 16px}
        @media(min-width:768px){.container{padding:0 24px}}

        .tabs{display:flex;gap:8px;padding:16px 0 12px;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}
        .tabs::-webkit-scrollbar{display:none}
        .tab{padding:10px 18px;background:transparent;border:1.5px solid var(--brd2);border-radius:var(--r-full);color:var(--txt2);font-size:13px;font-weight:500;cursor:pointer;transition:.2s;white-space:nowrap;display:flex;align-items:center;gap:6px}
        .tab:hover{border-color:var(--brd2);color:var(--txt)}
        .tab--active{background:var(--txt);border-color:var(--txt);color:var(--bg)}

        /* Search */
        .search{position:relative;margin-bottom:16px}
        .search__input{width:100%;padding:14px 16px 14px 48px;background:var(--bg3);border:1px solid var(--brd);border-radius:var(--r-md);color:var(--txt);font-size:15px;font-family:inherit;transition:.2s}
        .search__input::placeholder{color:var(--txt3)}
        .search__input:focus{outline:none;border-color:var(--orange);box-shadow:0 0 0 3px rgba(255,107,53,.15)}
        .search__icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--txt3);pointer-events:none}
        .search__clear{position:absolute;right:12px;top:50%;transform:translateY(-50%);width:28px;height:28px;background:var(--bg4);border:none;border-radius:50%;display:none;align-items:center;justify-content:center;cursor:pointer;color:var(--txt2)}
        .search__clear--show{display:flex}
        .search__results{position:absolute;top:100%;left:0;right:0;background:var(--bg3);border:1px solid var(--brd2);border-radius:var(--r-md);margin-top:8px;max-height:320px;overflow-y:auto;z-index:50;display:none}
        .search__results--show{display:block}
        .search__item{display:flex;align-items:center;gap:12px;padding:12px 16px;cursor:pointer;transition:.15s;border-bottom:1px solid var(--brd)}
        .search__item:last-child{border-bottom:none}
        .search__item:hover{background:var(--bg4)}
        .search__item-icon{width:36px;height:36px;background:var(--bg4);border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;color:#7a7a7f}
        .search__item-info{flex:1}
        .search__item-name{font-size:14px;font-weight:500}
        .search__item-cat{font-size:11px;color:var(--txt3)}
        .search__item-price{font-size:14px;font-weight:600}
        .search__empty{padding:24px;text-align:center;color:var(--txt3);font-size:14px}

        .score{background:linear-gradient(145deg,#0f0f0f,#000);border:1px solid var(--brd);border-radius:var(--r-xl);padding:24px 20px;margin-bottom:20px;position:relative;overflow:hidden}
        .score::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 30% 0%,rgba(255,107,53,.06),transparent 50%);pointer-events:none}
        .score__row{display:flex;align-items:flex-end;justify-content:space-between;margin-bottom:16px;flex-wrap:wrap;gap:12px}
        .score__main{display:flex;align-items:flex-end;gap:6px}
        .score__currency{font-size:20px;font-weight:300;color:var(--txt2);margin-bottom:6px}
        .score__value{font-size:clamp(42px,10vw,72px);font-weight:300;letter-spacing:-2px;line-height:.9;background:linear-gradient(180deg,#fff,#a0a0a0);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .score__info{text-align:right}
        .score__change{display:flex;align-items:center;gap:4px;font-size:13px;font-weight:500;color:var(--green);margin-bottom:2px;justify-content:flex-end}
        .score__status{font-size:12px;color:var(--txt3)}
        .score__meta{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
        .score__label{font-size:16px;font-weight:500}
        .score__count{font-size:13px;color:var(--txt2)}
        .spectrum{height:6px;background:linear-gradient(90deg,#ff453a,#ff6b35 20%,#ffd60a 40%,#30d158 60%,#64d2ff 80%,#0a84ff);border-radius:var(--r-full);position:relative}
        .spectrum__dot{position:absolute;top:50%;transform:translate(-50%,-50%);width:16px;height:16px;background:#fff;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,.5);transition:left .4s}

        .tab-content{display:none}.tab-content--active{display:block}

        .accordion{display:flex;flex-direction:column;gap:2px;margin-bottom:20px}
        .acc{background:var(--bg3);overflow:hidden}
        .acc:first-child{border-radius:var(--r-lg) var(--r-lg) 4px 4px}
        .acc:last-child{border-radius:4px 4px var(--r-lg) var(--r-lg)}
        .acc:only-child{border-radius:var(--r-lg)}
        .acc__head{display:flex;align-items:center;justify-content:space-between;padding:16px;cursor:pointer;transition:.2s}
        .acc__head:hover{background:var(--bg4)}
        .acc__left{display:flex;align-items:center;gap:12px}
        .acc__icon{width:36px;height:36px;background:var(--bg4);border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;color:#7a7a7f}
        .acc__title{font-size:15px;font-weight:500}
        .acc__sub{font-size:12px;color:var(--txt3)}
        .acc__right{display:flex;align-items:center;gap:10px}
        .acc__badge{min-width:22px;height:22px;padding:0 6px;background:var(--orange);border-radius:var(--r-full);display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:#fff}
        .acc__badge--empty{background:var(--brd2);color:var(--txt3)}
        .acc__chev{color:var(--txt3);transition:transform .3s}
        .acc--open .acc__chev{transform:rotate(180deg)}
        .acc__body{max-height:0;overflow:hidden;transition:max-height .4s}
        .acc--open .acc__body{max-height:3000px}
        .acc__inner{padding:0 16px 16px}

        .grid{display:grid;grid-template-columns:1fr;gap:10px}
        @media(min-width:580px){.grid{grid-template-columns:repeat(2,1fr)}}
        @media(min-width:900px){.grid--3{grid-template-columns:repeat(3,1fr)}}

        .svc{display:flex;flex-direction:column;gap:10px;padding:14px;background:var(--bg4);border:1px solid transparent;border-radius:var(--r-md);cursor:pointer;transition:.2s}
        .svc:hover{background:var(--bg5);border-color:var(--brd2)}
        .svc--sel{background:rgba(48,209,88,.08);border-color:rgba(48,209,88,.3)}
        .svc__top{display:flex;align-items:flex-start;gap:12px}
        .svc__icon{width:38px;height:38px;background:var(--bg3);border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;color:#7a7a7f;flex-shrink:0;transition:.2s}
        .svc--sel .svc__icon{background:var(--green);color:var(--bg)}
        .svc__info{flex:1;min-width:0}
        .svc__header{display:flex;align-items:flex-start;justify-content:space-between;gap:8px;margin-bottom:4px}
        .svc__name{font-size:13px;font-weight:600;line-height:1.3}
        .svc__desc{font-size:11px;color:var(--txt3);line-height:1.4}
        .svc__foot{display:flex;align-items:center;justify-content:space-between;gap:8px;padding-top:10px;border-top:1px solid var(--brd)}
        .svc__price{font-size:14px;font-weight:700}
        .svc__unit{font-size:10px;color:var(--txt3);background:var(--bg3);padding:3px 6px;border-radius:6px}
        .svc__qty{display:flex;align-items:center;gap:0;background:var(--bg3);border-radius:8px;overflow:hidden}
        .svc__qty-btn{width:32px;height:32px;background:transparent;border:none;color:var(--txt);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.15s;font-size:18px;font-weight:500}
        .svc__qty-btn:hover{background:var(--bg5);color:var(--green)}
        .svc__qty-btn:active{transform:scale(0.95)}
        .svc__qty-val{width:36px;text-align:center;font-size:14px;font-weight:600;color:var(--txt)}
        .svc__toggle{width:32px;height:32px;background:var(--bg3);border:2px solid var(--brd2);border-radius:8px;color:var(--txt3);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;font-size:14px}
        .svc__toggle:hover{border-color:var(--green);color:var(--green)}
        .svc__toggle--on{background:var(--green);border-color:var(--green);color:var(--bg)}
        .svc__subtotal{font-size:12px;color:var(--green);font-weight:500}

        .pkg{background:linear-gradient(145deg,var(--bg3),var(--bg4));border:1px solid var(--brd2);border-radius:var(--r-lg);padding:20px;margin-bottom:12px;cursor:pointer;transition:.2s}
        .pkg:hover{border-color:var(--brd2);transform:translateY(-2px)}
        .pkg--sel{border-color:var(--green);background:linear-gradient(145deg,rgba(48,209,88,.05),var(--bg3))}
        .pkg__head{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:14px}
        .pkg__badge{padding:5px 10px;background:var(--purple);border-radius:var(--r-full);font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}
        .pkg__title{font-size:18px;font-weight:700;margin-bottom:2px}
        .pkg__sub{font-size:13px;color:var(--txt2)}
        .pkg__items{display:flex;flex-direction:column;gap:6px;margin-bottom:16px}
        .pkg__item{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--txt2)}
        .pkg__item svg{color:var(--green);flex-shrink:0}
        .pkg__foot{display:flex;align-items:flex-end;justify-content:space-between;padding-top:14px;border-top:1px solid var(--brd)}
        .pkg__price{font-size:24px;font-weight:700}
        .pkg__price span{font-size:13px;font-weight:400;color:var(--txt3)}
        .pkg__save{font-size:12px;color:var(--green);font-weight:500}

        .bar{position:fixed;bottom:0;left:0;right:0;background:rgba(0,0,0,.92);backdrop-filter:blur(20px);border-top:1px solid var(--brd);padding:12px 16px;padding-bottom:max(12px,env(safe-area-inset-bottom));z-index:200;transform:translateY(100%);transition:transform .4s}
        .bar--show{transform:translateY(0)}
        .bar__inner{max-width:960px;margin:0 auto;display:flex;flex-direction:column;gap:10px}
        @media(min-width:580px){.bar__inner{flex-direction:row;align-items:center;justify-content:space-between}}
        .bar__info{display:flex;align-items:center;gap:16px}
        .bar__total{font-size:22px;font-weight:700}
        .bar__total span{font-size:12px;font-weight:400;color:var(--txt3)}
        .bar__count{font-size:12px;color:var(--txt2)}
        .bar__btns{display:flex;gap:8px}
        .bar__btn{flex:1;display:flex;align-items:center;justify-content:center;gap:6px;padding:12px 16px;border-radius:var(--r-md);font-size:13px;font-weight:600;cursor:pointer;transition:.2s;border:none}
        .bar__btn--sec{background:var(--bg4);color:var(--txt);border:1px solid var(--brd2)}
        .bar__btn--sec:hover{background:var(--bg5)}
        .bar__btn--pri{background:#25d366;color:#121212;min-width:140px}
        .bar__btn--pri:hover{background:#20bd5a}

        .modal{position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(10px);z-index:1000;display:flex;align-items:flex-end;justify-content:center;opacity:0;visibility:hidden;transition:.3s}
        .modal--show{opacity:1;visibility:visible}
        .modal__box{background:var(--bg3);border-radius:var(--r-xl) var(--r-xl) 0 0;width:100%;max-width:560px;max-height:85vh;overflow:hidden;transform:translateY(100%);transition:transform .4s;display:flex;flex-direction:column}
        .modal--show .modal__box{transform:translateY(0)}
        @media(min-width:580px){.modal__box{border-radius:var(--r-xl);margin:auto;max-height:80vh}.modal{align-items:center;padding:20px}}
        .modal__handle{width:36px;height:5px;background:var(--brd2);border-radius:var(--r-full);margin:10px auto}
        .modal__head{display:flex;align-items:center;justify-content:space-between;padding:8px 20px 16px;flex-shrink:0}
        .modal__title{font-size:18px;font-weight:600}
        .modal__close{width:32px;height:32px;background:var(--bg4);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--txt2);transition:.2s}
        .modal__close:hover{background:var(--bg5);color:var(--txt)}
        .modal__body{padding:0 20px 20px;overflow-y:auto;flex:1}
        .modal__foot{padding:14px 20px;padding-bottom:max(14px,env(safe-area-inset-bottom));border-top:1px solid var(--brd);display:flex;gap:8px;flex-shrink:0}

        .sum-sec{margin-bottom:16px}
        .sum-sec__title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--txt3);margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid var(--brd)}
        .sum-item{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--brd)}
        .sum-item:last-child{border-bottom:none}
        .sum-item__left{display:flex;align-items:center;gap:10px;flex:1;min-width:0}
        .sum-item__icon{width:30px;height:30px;background:var(--bg4);border-radius:8px;display:flex;align-items:center;justify-content:center;color:#7a7a7f;flex-shrink:0}
        .sum-item__info{flex:1;min-width:0}
        .sum-item__name{font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .sum-item__qty{font-size:11px;color:var(--txt3)}
        .sum-item__price{font-size:13px;font-weight:600;flex-shrink:0}
        .sum-total{display:flex;align-items:center;justify-content:space-between;padding:16px 0 0;margin-top:8px;border-top:2px solid var(--brd2)}
        .sum-total__label{font-size:15px;font-weight:500}
        .sum-total__value{font-size:22px;font-weight:700;color:var(--green)}

        .form-sec{margin-bottom:20px}
        .form-sec:last-child{margin-bottom:0}
        .form-sec__title{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--txt3);margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid var(--brd)}
        .form-row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;gap:10px}
        .form-row__label{font-size:12px;color:var(--txt2);flex:1}
        .form-row__input{width:90px;padding:8px 10px;background:var(--bg4);border:1px solid var(--brd);border-radius:8px;color:var(--txt);font-size:13px;font-weight:500;text-align:right;font-family:inherit}
        .form-row__input:focus{outline:none;border-color:var(--orange)}

        .toast{position:fixed;top:70px;left:50%;transform:translateX(-50%) translateY(-20px);background:var(--bg4);border:1px solid var(--green);border-radius:var(--r-md);padding:12px 18px;display:flex;align-items:center;gap:8px;z-index:1100;opacity:0;visibility:hidden;transition:.3s}
        .toast--show{opacity:1;visibility:visible;transform:translateX(-50%) translateY(0)}
        .toast__icon{color:var(--green)}
        .toast__msg{font-size:13px;font-weight:500}

        .empty{text-align:center;padding:40px 20px}
        .empty__icon{width:56px;height:56px;background:var(--bg4);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 14px;color:var(--txt3)}
        .empty__title{font-size:16px;font-weight:600;margin-bottom:4px}
        .empty__text{font-size:13px;color:var(--txt3)}
    </style>
</head>
<body>
    <header class="header">
        <button class="header__btn" onclick="openEdit()" title="Editar valores">
            <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg>
        </button>
        <span class="header__title">Seu Orçamento</span>
        <button class="header__btn" title="Informações">
            <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
        </button>
    </header>

    <main class="container">
        <nav class="tabs">
            <button class="tab tab--active" data-tab="social" onclick="switchTab('social')">Rede Social</button>
            <button class="tab" data-tab="mkt" onclick="switchTab('mkt')">Marketing</button>
            <button class="tab" data-tab="emp" onclick="switchTab('emp')">Sua Empresa</button>
            <button class="tab" data-tab="pkg" onclick="switchTab('pkg')">Pacotes</button>
        </nav>

        <!-- Buscador -->
        <div class="search">
            <svg class="icon search__icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            <input type="text" class="search__input" id="searchInput" placeholder="Buscar serviços..." oninput="handleSearch()" onfocus="handleSearch()">
            <button class="search__clear" id="searchClear" onclick="clearSearch()">
                <svg class="icon-sm" viewBox="0 0 24 24"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
            <div class="search__results" id="searchResults"></div>
        </div>

        <div class="score">
            <div class="score__row">
                <div class="score__main">
                    <span class="score__currency">R$</span>
                    <span class="score__value" id="scoreVal">0</span>
                </div>
                <div class="score__info">
                    <div class="score__change" id="scoreChange">
                        <svg class="icon-sm" viewBox="0 0 24 24"><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></svg>
                        Aguardando seleção
                    </div>
                    <div class="score__status" id="scoreStatus">Escolha os serviços abaixo</div>
                </div>
            </div>
            <div class="score__meta">
                <span class="score__label" id="scoreLabel">Monte seu orçamento</span>
                <span class="score__count" id="scoreCount">0 serviços</span>
            </div>
            <div class="spectrum">
                <div class="spectrum__dot" id="specDot" style="left:3%"></div>
            </div>
        </div>

        <!-- REDE SOCIAL -->
        <div class="tab-content tab-content--active" id="tab-social">
            <div class="accordion">
                <div class="acc acc--open">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon"><svg class="icon" viewBox="0 0 24 24"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2"/></svg></div>
                            <div><div class="acc__title">Criativos para Anúncios</div><div class="acc__sub">Vídeos para tráfego pago</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-criativos">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-criativos"></div></div></div>
                </div>
                <div class="acc">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--purple)"><svg class="icon" viewBox="0 0 24 24"><path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"/><path d="M10 2c1 .5 2 2 2 5"/></svg></div>
                            <div><div class="acc__title">Conteúdo Orgânico</div><div class="acc__sub">Reels, Stories e Posts</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-organico">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-organico"></div></div></div>
                </div>
                <div class="acc">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--cyan)"><svg class="icon" viewBox="0 0 24 24"><circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/></svg></div>
                            <div><div class="acc__title">Edição e Pós-Produção</div><div class="acc__sub">Tratamento e finalização</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-edicao">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-edicao"></div></div></div>
                </div>
            </div>
        </div>

        <!-- MARKETING -->
        <div class="tab-content" id="tab-mkt">
            <div class="accordion">
                <div class="acc acc--open">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--red)"><svg class="icon" viewBox="0 0 24 24"><polygon points="23 7 16 12 23 17 23 7"/><rect width="15" height="14" x="1" y="5" rx="2"/></svg></div>
                            <div><div class="acc__title">VSL - Video Sales Letter</div><div class="acc__sub">Vídeos de vendas de alta conversão</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-vsl">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-vsl"></div></div></div>
                </div>
                <div class="acc">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--yellow)"><svg class="icon" viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div>
                            <div><div class="acc__title">Lançamentos</div><div class="acc__sub">Estrutura para infoprodutos</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-lanc">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-lanc"></div></div></div>
                </div>
                <div class="acc">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--green)"><svg class="icon" viewBox="0 0 24 24"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></div>
                            <div><div class="acc__title">Consultoria e Estratégia</div><div class="acc__sub">Planejamento de conteúdo</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-consult">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-consult"></div></div></div>
                </div>
            </div>
        </div>

        <!-- SUA EMPRESA -->
        <div class="tab-content" id="tab-emp">
            <div class="accordion">
                <div class="acc acc--open">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--blue)"><svg class="icon" viewBox="0 0 24 24"><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg></div>
                            <div><div class="acc__title">Vídeo Institucional</div><div class="acc__sub">Apresentação da empresa</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-inst">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-inst"></div></div></div>
                </div>
                <div class="acc">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--purple)"><svg class="icon" viewBox="0 0 24 24"><path d="M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0"/><circle cx="12" cy="8" r="2"/><path d="M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835"/></svg></div>
                            <div><div class="acc__title">Cobertura de Eventos</div><div class="acc__sub">Registro profissional</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-evento">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-evento"></div></div></div>
                </div>
                <div class="acc">
                    <div class="acc__head" onclick="toggleAcc(this)">
                        <div class="acc__left">
                            <div class="acc__icon" style="color:var(--cyan)"><svg class="icon" viewBox="0 0 24 24"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg></div>
                            <div><div class="acc__title">Fotografia Corporativa</div><div class="acc__sub">Ensaios e produtos</div></div>
                        </div>
                        <div class="acc__right">
                            <span class="acc__badge acc__badge--empty" id="b-foto">0</span>
                            <svg class="icon acc__chev" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg>
                        </div>
                    </div>
                    <div class="acc__body"><div class="acc__inner"><div class="grid" id="g-foto"></div></div></div>
                </div>
            </div>
        </div>

        <!-- PACOTES -->
        <div class="tab-content" id="tab-pkg">
            <div id="pkgContainer"></div>
        </div>
    </main>

    <div class="bar" id="bar">
        <div class="bar__inner">
            <div class="bar__btns" style="width:100%">
                <button class="bar__btn bar__btn--sec" onclick="openSum()">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M16 13H8"/><path d="M16 17H8"/><path d="M10 9H8"/></svg>
                    Resumo
                </button>
                <button class="bar__btn bar__btn--pri" onclick="sendWpp()">
                    <svg class="icon" viewBox="0 0 24 24"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>
                    WhatsApp
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="modalSum">
        <div class="modal__box">
            <div class="modal__handle"></div>
            <div class="modal__head">
                <h2 class="modal__title">Resumo do Orçamento</h2>
                <button class="modal__close" onclick="closeModal('modalSum')"><svg class="icon" viewBox="0 0 24 24"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button>
            </div>
            <div class="modal__body" id="sumBody"></div>
            <div class="modal__foot">
                <button class="bar__btn bar__btn--sec" style="flex:1" onclick="closeModal('modalSum')">Fechar</button>
                <button class="bar__btn bar__btn--pri" style="flex:1" onclick="sendWpp()"><svg class="icon" viewBox="0 0 24 24"><path d="m22 2-7 20-4-9-9-4Z"/></svg>WhatsApp</button>
            </div>
        </div>
    </div>

    <div class="modal" id="modalPass">
        <div class="modal__box" style="max-width:360px">
            <div class="modal__handle"></div>
            <div class="modal__head">
                <h2 class="modal__title">Acesso Restrito</h2>
                <button class="modal__close" onclick="closeModal('modalPass')"><svg class="icon" viewBox="0 0 24 24"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button>
            </div>
            <div class="modal__body">
                <p style="font-size:13px;color:var(--txt2);margin-bottom:16px">Digite a senha para editar os valores:</p>
                <input type="password" class="form-row__input" id="passInput" style="width:100%;text-align:center;font-size:16px;padding:14px" placeholder="Senha" onkeypress="if(event.key==='Enter')checkPass()">
                <p id="passError" style="font-size:12px;color:var(--red);margin-top:10px;display:none">Senha incorreta</p>
            </div>
            <div class="modal__foot">
                <button class="bar__btn bar__btn--sec" style="flex:1" onclick="closeModal('modalPass')">Cancelar</button>
                <button class="bar__btn bar__btn--pri" style="flex:1" onclick="checkPass()"><svg class="icon" viewBox="0 0 24 24"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>Entrar</button>
            </div>
        </div>
    </div>

    <div class="modal" id="modalEdit">
        <div class="modal__box">
            <div class="modal__handle"></div>
            <div class="modal__head">
                <h2 class="modal__title">Editar Valores</h2>
                <button class="modal__close" onclick="closeModal('modalEdit')"><svg class="icon" viewBox="0 0 24 24"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button>
            </div>
            <div class="modal__body" id="editBody"></div>
            <div class="modal__foot">
                <button class="bar__btn bar__btn--sec" style="flex:1" onclick="closeModal('modalEdit')">Cancelar</button>
                <button class="bar__btn bar__btn--pri" style="flex:1" onclick="saveEdit()"><svg class="icon" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>Salvar</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <span class="toast__icon"><svg class="icon" viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></span>
        <span class="toast__msg" id="toastMsg">Salvo!</span>
    </div>

<script>
// Preços ajustados para mercado de Vila Velha/ES (valores médios regionais)
const D={
criativos:[
{id:'c1',n:'Criativo de Anúncio (até 1min)',d:'Vídeo curto para tráfego pago',p:280,u:'por vídeo',qty:true},
{id:'c2',n:'Pacote Semanal (10 criativos)',d:'Produção recorrente semanal',p:2200,u:'por semana',qty:false},
{id:'c3',n:'Pacote Mensal (20 criativos)',d:'Produção recorrente mensal',p:4200,u:'por mês',qty:false},
{id:'c4',n:'Criativo com Ator/Modelo',d:'Inclui talento profissional',p:480,u:'por vídeo',qty:true},
{id:'c5',n:'Variação de Criativo (A/B)',d:'Versão alternativa para teste',p:120,u:'por variação',qty:true},
],
organico:[
{id:'o1',n:'Reels/TikTok (até 60s)',d:'Conteúdo viral para feed',p:220,u:'por vídeo',qty:true},
{id:'o2',n:'Stories (pacote 5 vídeos)',d:'Conteúdo diário para engajamento',p:350,u:'por pacote',qty:true},
{id:'o3',n:'Carrossel Animado',d:'Posts com motion graphics',p:250,u:'por post',qty:true},
{id:'o4',n:'Bastidores/Dia a Dia',d:'Conteúdo autêntico da marca',p:300,u:'por vídeo',qty:true},
],
edicao:[
{id:'e1',n:'Edição Básica',d:'Cortes, legendas e trilha',p:100,u:'por vídeo',qty:true},
{id:'e2',n:'Edição Avançada',d:'Efeitos, motion e color grading',p:280,u:'por vídeo',qty:true},
{id:'e3',n:'Legendas Dinâmicas',d:'Legendas animadas estilo TikTok',p:60,u:'por vídeo',qty:true},
{id:'e4',n:'Thumbnail Personalizada',d:'Capa otimizada para cliques',p:45,u:'por thumb',qty:true},
],
vsl:[
{id:'v1',n:'VSL Curta (até 5min)',d:'Vídeo de vendas direto ao ponto',p:1800,u:'por vídeo',qty:true},
{id:'v2',n:'VSL Média (5-15min)',d:'Storytelling completo de vendas',p:3500,u:'por vídeo',qty:true},
{id:'v3',n:'VSL Longa (15-30min)',d:'Apresentação completa do produto',p:5500,u:'por vídeo',qty:true},
{id:'v4',n:'Variação de VSL (A/B)',d:'Nova versão para teste (60-90 dias)',p:1400,u:'por variação',qty:true},
{id:'v5',n:'Roteiro de VSL',d:'Script profissional de alta conversão',p:900,u:'por roteiro',qty:true},
],
lanc:[
{id:'l1',n:'Vídeo de Captação (CPL)',d:'Convite para evento de lançamento',p:1400,u:'por vídeo',qty:true},
{id:'l2',n:'Conteúdo Pré-Lançamento',d:'Série de vídeos de aquecimento',p:2500,u:'por série',qty:true},
{id:'l3',n:'Gravação de Aula/Webinar',d:'Produção profissional de live',p:2200,u:'por gravação',qty:true},
{id:'l4',n:'Depoimentos/Prova Social',d:'Entrevistas com clientes',p:350,u:'por depoimento',qty:true},
{id:'l5',n:'Teaser de Lançamento',d:'Vídeo de expectativa',p:700,u:'por teaser',qty:true},
],
consult:[
{id:'s1',n:'Consultoria de Conteúdo (1h)',d:'Análise e direcionamento',p:280,u:'por hora',qty:true},
{id:'s2',n:'Planejamento Mensal',d:'Calendário editorial completo',p:950,u:'por mês',qty:false},
{id:'s3',n:'Análise de Concorrência',d:'Benchmark do mercado',p:600,u:'por relatório',qty:false},
{id:'s4',n:'Script/Roteiro Personalizado',d:'Texto persuasivo sob medida',p:200,u:'por roteiro',qty:true},
],
inst:[
{id:'i1',n:'Vídeo Institucional (até 2min)',d:'Apresentação da empresa',p:3500,u:'por vídeo',qty:false},
{id:'i2',n:'Vídeo Institucional (3-5min)',d:'Versão estendida com mais detalhes',p:5800,u:'por vídeo',qty:false},
{id:'i3',n:'Vídeo Manifesto',d:'Propósito e valores da marca',p:4200,u:'por vídeo',qty:false},
{id:'i4',n:'Tour Virtual da Empresa',d:'Apresentação das instalações',p:2800,u:'por vídeo',qty:false},
],
evento:[
{id:'ev1',n:'Cobertura Básica (4h)',d:'Registro do evento',p:1800,u:'por evento',qty:false},
{id:'ev2',n:'Cobertura Completa (8h)',d:'Registro integral + entrevistas',p:3500,u:'por evento',qty:false},
{id:'ev3',n:'Aftermovie',d:'Vídeo resumo do evento',p:1400,u:'por vídeo',qty:false},
{id:'ev4',n:'Transmissão ao Vivo',d:'Streaming profissional',p:2800,u:'por evento',qty:false},
],
foto:[
{id:'f1',n:'Ensaio Corporativo (2h)',d:'Fotos da equipe e liderança',p:900,u:'por ensaio',qty:false},
{id:'f2',n:'Foto de Produto (10 itens)',d:'Still para e-commerce',p:700,u:'por pacote',qty:true},
{id:'f3',n:'Foto Gastronômica',d:'Alimentos e bebidas',p:850,u:'por sessão',qty:false},
{id:'f4',n:'Banco de Imagens Interno',d:'Fotos diversas da empresa',p:1400,u:'por dia',qty:false},
]};

const PKG=[
{id:'pk1',n:'Starter - Redes Sociais',sub:'Ideal para começar',badge:'Popular',itens:['10 criativos por mês','Edição básica inclusa','Legendas dinâmicas','2 variações para teste'],p:2800,eco:'Economia de R$ 650'},
{id:'pk2',n:'Pro - Marketing Digital',sub:'Para escalar vendas',badge:'Recomendado',itens:['20 criativos por mês','1 VSL curta a cada 60-90 dias','Roteiros inclusos','Consultoria mensal'],p:6800,eco:'Economia de R$ 1.800'},
{id:'pk3',n:'Enterprise - Completo',sub:'Solução completa',badge:'Premium',itens:['40 criativos por mês','2 VSLs por trimestre','Vídeo institucional anual','Planejamento estratégico'],p:14500,eco:'Economia de R$ 4.200'}
];

let sel={};// {id: qty}
let pkgSel=null;
const fmt=n=>n.toLocaleString('pt-BR');
const all=()=>Object.values(D).flat();
const get=id=>all().find(s=>s.id===id);
const cat=id=>{for(let[k,v]of Object.entries(D))if(v.find(s=>s.id===id))return k;return''};
const catName={criativos:'Criativos',organico:'Conteúdo Orgânico',edicao:'Edição',vsl:'VSL',lanc:'Lançamentos',consult:'Consultoria',inst:'Institucional',evento:'Eventos',foto:'Fotografia'};

const total=()=>{
    let t=0;
    Object.entries(sel).forEach(([id,qty])=>{
        const s=get(id);
        if(s)t+=s.p*qty;
    });
    if(pkgSel){const p=PKG.find(x=>x.id===pkgSel);if(p)t+=p.p}
    return t;
};

const countItems=()=>{
    let c=Object.values(sel).reduce((a,b)=>a+b,0);
    if(pkgSel)c++;
    return c;
};

function renderSvc(s){
    const qty=sel[s.id]||0;
    const isSel=qty>0;
    const sub=s.p*qty;
    
    let qtyHtml = '';
    if(s.qty){
        qtyHtml = `<div class="svc__qty">
            <button class="svc__qty-btn" onclick="event.stopPropagation();changeQty('${s.id}',-1)">−</button>
            <span class="svc__qty-val">${qty}</span>
            <button class="svc__qty-btn" onclick="event.stopPropagation();changeQty('${s.id}',1)">+</button>
        </div>`;
    } else {
        qtyHtml = `<button class="svc__toggle ${isSel?'svc__toggle--on':''}" onclick="event.stopPropagation();toggle('${s.id}')">${isSel?'✓':''}</button>`;
    }
    
    return `<div class="svc${isSel?' svc--sel':''}" data-id="${s.id}">
    <div class="svc__top">
        <div class="svc__icon"><svg class="icon" viewBox="0 0 24 24"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2"/></svg></div>
        <div class="svc__info">
            <div class="svc__header"><span class="svc__name">${s.n}</span></div>
            <div class="svc__desc">${s.d}</div>
        </div>
    </div>
    <div class="svc__foot">
        <div><span class="svc__price">R$ ${fmt(s.p)}</span> <span class="svc__unit">${s.u}</span></div>
        ${qtyHtml}
    </div>
    ${isSel&&s.qty?`<div class="svc__subtotal">Subtotal: R$ ${fmt(sub)}</div>`:''}
</div>`;
}

function renderPkg(p){
    const isSel=pkgSel===p.id;
    return`<div class="pkg${isSel?' pkg--sel':''}" onclick="togglePkg('${p.id}')">
    <div class="pkg__head"><div><div class="pkg__title">${p.n}</div><div class="pkg__sub">${p.sub}</div></div><span class="pkg__badge">${p.badge}</span></div>
    <div class="pkg__items">${p.itens.map(i=>`<div class="pkg__item"><svg class="icon-sm" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>${i}</div>`).join('')}</div>
    <div class="pkg__foot"><div class="pkg__price">R$ ${fmt(p.p)} <span>/mês</span></div><div class="pkg__save">${p.eco}</div></div>
</div>`}

function render(){
    Object.keys(D).forEach(k=>{const g=document.getElementById('g-'+k);if(g)g.innerHTML=D[k].map(renderSvc).join('')});
    document.getElementById('pkgContainer').innerHTML=PKG.map(renderPkg).join('');
    updBadges();updScore();
}

function updBadges(){
    const cnt={};Object.keys(D).forEach(k=>cnt[k]=0);
    Object.keys(sel).forEach(id=>{const c=cat(id);if(cnt[c]!==undefined&&sel[id]>0)cnt[c]+=sel[id]});
    Object.entries(cnt).forEach(([k,v])=>{const b=document.getElementById('b-'+k);if(b){b.textContent=v;b.classList.toggle('acc__badge--empty',v===0)}});
    const c=countItems();
    document.getElementById('bar').classList.toggle('bar--show',c>0);
}

function updScore(){
    const t=total(),c=countItems();
    document.getElementById('scoreVal').textContent=fmt(t);
    document.getElementById('scoreCount').textContent=`${c} ${c===1?'serviço':'serviços'}`;
    const ch=document.getElementById('scoreChange');
    if(c>0){ch.innerHTML=`<svg class="icon-sm" viewBox="0 0 24 24"><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></svg>+${c} selecionado${c>1?'s':''}`}
    else{ch.innerHTML=`<svg class="icon-sm" viewBox="0 0 24 24"><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></svg>Aguardando seleção`}
    document.getElementById('scoreStatus').textContent=c>0?'Valor atualizado':'Escolha os serviços abaixo';
    let lbl='Selecione os serviços',clr='var(--txt2)';
    if(t>0&&t<=2500){lbl='Projeto pontual';clr='var(--txt)'}
    else if(t>2500&&t<=6000){lbl='Produção mensal';clr='var(--txt)'}
    else if(t>6000&&t<=12000){lbl='Parceria recorrente';clr='var(--txt)'}
    else if(t>12000){lbl='Contrato dedicado';clr='var(--txt)'}
    const lblEl=document.getElementById('scoreLabel');lblEl.textContent=lbl;lblEl.style.color=clr;
    document.getElementById('specDot').style.left=Math.max(3,Math.min(97,t/250))+'%';
}

function changeQty(id,delta){
    const s=get(id);if(!s)return;
    const curr=sel[id]||0;
    const nv=Math.max(0,curr+delta);
    if(nv===0)delete sel[id];
    else sel[id]=nv;
    render();
}

function toggle(id){
    if(sel[id])delete sel[id];
    else sel[id]=1;
    render();
}

function togglePkg(id){pkgSel=pkgSel===id?null:id;render()}
function switchTab(t){
    document.querySelectorAll('.tab').forEach(el=>el.classList.toggle('tab--active',el.dataset.tab===t));
    document.querySelectorAll('.tab-content').forEach(el=>el.classList.toggle('tab-content--active',el.id==='tab-'+t));
}
function toggleAcc(el){el.parentElement.classList.toggle('acc--open')}

// SEARCH
function handleSearch(){
    const q=document.getElementById('searchInput').value.trim().toLowerCase();
    const clear=document.getElementById('searchClear');
    const results=document.getElementById('searchResults');
    clear.classList.toggle('search__clear--show',q.length>0);
    if(q.length<2){results.classList.remove('search__results--show');return}
    const matches=all().filter(s=>s.n.toLowerCase().includes(q)||s.d.toLowerCase().includes(q));
    if(matches.length===0){
        results.innerHTML='<div class="search__empty">Nenhum serviço encontrado</div>';
    }else{
        results.innerHTML=matches.slice(0,8).map(s=>`
            <div class="search__item" onclick="addFromSearch('${s.id}')">
                <div class="search__item-icon"><svg class="icon-sm" viewBox="0 0 24 24"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2"/></svg></div>
                <div class="search__item-info">
                    <div class="search__item-name">${s.n}</div>
                    <div class="search__item-cat">${catName[cat(s.id)]}</div>
                </div>
                <div class="search__item-price">R$ ${fmt(s.p)}</div>
            </div>
        `).join('');
    }
    results.classList.add('search__results--show');
}

function addFromSearch(id){
    const s=get(id);if(!s)return;
    if(s.qty){sel[id]=(sel[id]||0)+1}else{sel[id]=1}
    clearSearch();render();toast(`${s.n} adicionado!`);
}

function clearSearch(){
    document.getElementById('searchInput').value='';
    document.getElementById('searchClear').classList.remove('search__clear--show');
    document.getElementById('searchResults').classList.remove('search__results--show');
}

document.addEventListener('click',e=>{
    if(!e.target.closest('.search'))document.getElementById('searchResults').classList.remove('search__results--show');
});

function openSum(){
    const body=document.getElementById('sumBody');
    const hasItems=Object.keys(sel).length>0||pkgSel;
    if(!hasItems){body.innerHTML=`<div class="empty"><div class="empty__icon"><svg class="icon-lg" viewBox="0 0 24 24"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg></div><p class="empty__title">Nenhum item selecionado</p><p class="empty__text">Selecione serviços para ver o resumo</p></div>`}
    else{
        let html='';
        const grupos={};
        Object.entries(sel).forEach(([id,qty])=>{const c=cat(id);if(!grupos[c])grupos[c]=[];grupos[c].push({...get(id),qty})});
        Object.entries(grupos).forEach(([k,itens])=>{
            html+=`<div class="sum-sec"><div class="sum-sec__title">${catName[k]||k}</div>`;
            itens.forEach(s=>{html+=`<div class="sum-item"><div class="sum-item__left"><div class="sum-item__icon"><svg class="icon-sm" viewBox="0 0 24 24"><path d="m22 8-6 4 6 4V8Z"/><rect width="14" height="12" x="2" y="6" rx="2"/></svg></div><div class="sum-item__info"><span class="sum-item__name">${s.n}</span>${s.qty>1?`<span class="sum-item__qty">${s.qty}x R$ ${fmt(s.p)}</span>`:''}</div></div><span class="sum-item__price">R$ ${fmt(s.p*s.qty)}</span></div>`});
            html+=`</div>`
        });
        if(pkgSel){const p=PKG.find(x=>x.id===pkgSel);if(p){html+=`<div class="sum-sec"><div class="sum-sec__title">Pacote</div><div class="sum-item"><div class="sum-item__left"><div class="sum-item__icon" style="color:var(--purple)"><svg class="icon-sm" viewBox="0 0 24 24"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/></svg></div><div class="sum-item__info"><span class="sum-item__name">${p.n}</span></div></div><span class="sum-item__price">R$ ${fmt(p.p)}</span></div></div>`}}
        html+=`<div class="sum-total"><span class="sum-total__label">Total</span><span class="sum-total__value">R$ ${fmt(total())}</span></div>`;
        body.innerHTML=html;
    }
    document.getElementById('modalSum').classList.add('modal--show');document.body.style.overflow='hidden';
}

// PASSWORD
const EDIT_PASS = '210199'; // Altere a senha aqui

function askPass(){
    document.getElementById('passInput').value='';
    document.getElementById('passError').style.display='none';
    document.getElementById('modalPass').classList.add('modal--show');
    document.body.style.overflow='hidden';
    setTimeout(()=>document.getElementById('passInput').focus(),100);
}

function checkPass(){
    const input=document.getElementById('passInput').value;
    if(input===EDIT_PASS){
        closeModal('modalPass');
        openEditReal();
    }else{
        document.getElementById('passError').style.display='block';
        document.getElementById('passInput').value='';
        document.getElementById('passInput').focus();
    }
}

function openEdit(){
    askPass();
}

function openEditReal(){
    let html='';
    Object.entries(D).forEach(([k,itens])=>{
        html+=`<div class="form-sec"><div class="form-sec__title">${catName[k]||k}</div>`;
        itens.forEach(s=>{html+=`<div class="form-row"><span class="form-row__label">${s.n}</span><input type="number" class="form-row__input" data-id="${s.id}" value="${s.p}" min="0" step="50"></div>`});
        html+=`</div>`;
    });
    document.getElementById('editBody').innerHTML=html;
    document.getElementById('modalEdit').classList.add('modal--show');document.body.style.overflow='hidden';
}

function saveEdit(){
    document.querySelectorAll('#editBody .form-row__input').forEach(inp=>{
        const id=inp.dataset.id,v=parseInt(inp.value)||0;
        Object.values(D).forEach(arr=>{const s=arr.find(x=>x.id===id);if(s)s.p=v});
    });
    closeModal('modalEdit');render();toast('Valores atualizados!');
}

function closeModal(id){document.getElementById(id).classList.remove('modal--show');document.body.style.overflow=''}
function toast(msg){const t=document.getElementById('toast');document.getElementById('toastMsg').textContent=msg;t.classList.add('toast--show');setTimeout(()=>t.classList.remove('toast--show'),2500)}

function sendWpp(){
    if(Object.keys(sel).length===0&&!pkgSel)return toast('Selecione itens primeiro');
    const dt=new Date().toLocaleDateString('pt-BR');
    let msg=`*ORÇAMENTO AUDIOVISUAL*\nData: ${dt}\n\n`;
    const grupos={};
    Object.entries(sel).forEach(([id,qty])=>{const c=cat(id);if(!grupos[c])grupos[c]=[];grupos[c].push({...get(id),qty})});
    Object.entries(grupos).forEach(([k,itens])=>{
        msg+=`*${(catName[k]||k).toUpperCase()}*\n`;
        itens.forEach(s=>{msg+=`• ${s.n}${s.qty>1?` (${s.qty}x)`:''}: R$ ${fmt(s.p*s.qty)}\n`});
        msg+='\n';
    });
    if(pkgSel){const p=PKG.find(x=>x.id===pkgSel);if(p)msg+=`*PACOTE*\n• ${p.n}: R$ ${fmt(p.p)}/mês\n\n`}
    msg+=`━━━━━━━━━━━━━━━━━━\n*TOTAL: R$ ${fmt(total())}*\n\nAguardo seu retorno!`;
    window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`,'_blank');
}

document.querySelectorAll('.modal').forEach(m=>{m.addEventListener('click',e=>{if(e.target===m)closeModal(m.id)})});
document.addEventListener('keydown',e=>{if(e.key==='Escape')document.querySelectorAll('.modal--show').forEach(m=>closeModal(m.id))});
document.addEventListener('DOMContentLoaded',render);
</script>
</body>
</html>
